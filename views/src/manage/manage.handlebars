<html lang='pt-br'>
    <head>
        <meta charset='UTF-8' />
        <meta name='viewport' content='width=device-width, initial-scale=1.0' />
        <title>IFSP - TutorTime | Gerenciamento</title>
        {{! <link rel='stylesheet' href='/style.css' /> }}
        <link rel='stylesheet' href='/manage.css' />
        <link
            rel='stylesheet'
            href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css'
        />
    </head>
    <body>
        <header class='header-transparent'>
            <div class='logo'>
                <div class='imageLogo'>
                    <img
                        src='/logo.png'
                        alt='Logo TutorTime'
                        class='pulse-animation'
                    />
                </div>
                <h1>TutorTime <span class='highlight'>IFSP</span></h1>
            </div>
            <nav>
                <ul class='menu'>
                    <li><a href='/home'><i class='fas fa-home'></i>
                            Home</a></li>
                    <li><a href='/about'><i class='fas fa-info-circle'></i>
                            About</a></li>
                    <li><a href='#' class='active'><i class='fas fa-tasks'></i>
                            Manage</a></li>
                </ul>
            </nav>
            <div class='header-actions'>
                <button id='theme-toggle' class='theme-toggle'><i
                        class='fas fa-moon'
                    ></i></button>
            </div>
        </header>

        <div class='dashboard-container'>
            <div class='dashboard-sidebar'>
                <div class='sidebar-header'>
                    <h3><i class='fas fa-chart-line'></i> Dashboard</h3>
                </div>
                <ul class='sidebar-menu'>
                    <li class='active'><a href='#monitorias'><i
                                class='fas fa-users'
                            ></i>
                            Monitorias</a></li>
                    <li><a href='#analytics'><i class='fas fa-chart-pie'></i>
                            Analytics</a></li>
                    <li><a href='#settings'><i class='fas fa-cog'></i>
                            Configurações</a></li>
                </ul>
                <div class='sidebar-footer'>
                    <div class='stats-widget'>
                        <div class='stat'>
                            <span class='stat-value'>{{totalMonitorias}}</span>
                            <span class='stat-label'>Monitorias</span>
                        </div>
                        <div class='stat'>
                            <span class='stat-value'>{{totalInscritos}}</span>
                            <span class='stat-label'>Inscritos</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class='dashboard-content'>
                <div class='dashboard-header'>
                    <h2>Gerenciamento de Monitorias</h2>
                    <div class='dashboard-actions'>
                        <div class='search-box'>
                            <i class='fas fa-search'></i>
                            <input
                                type='text'
                                id='search-monitorias'
                                placeholder='Buscar monitoria...'
                            />
                        </div>
                        <button id='toggleFormButton' class='btn-primary'><i
                                class='fas fa-plus'
                            ></i>
                            Nova Monitoria</button>
                    </div>
                </div>

                <!-- Animated Modal Form -->
                <div id='formModal' class='modal'>
                    <div class='modal-content'>
                        <div id='newSubjectForm'>
                            <div class='modal-header'>
                                <h2>Adicionar Monitoria</h2>
                                <button
                                    class='close-button'
                                    onclick='toggleForm()'
                                ><i class='fas fa-times'></i></button>
                            </div>
                            <form
                                id='meuFormulario'
                                action='/add'
                                method='POST'
                                class='animated-form'
                            >
                                <div class='form-group'>
                                    <label for='materiaREQ'><i
                                            class='fas fa-book'
                                        ></i>
                                        Disciplina</label>
                                    <select
                                        name='materiaREQ'
                                        id='materiaREQ'
                                        class='input input-animated'
                                        required
                                    >
                                        <option
                                            value=''
                                            disabled
                                            selected
                                        >Selecione a disciplina</option>
                                        {{#each Materia}}
                                            <option
                                                value='{{id}}'
                                            >{{nome}}</option>
                                        {{/each}}
                                    </select>
                                    <div class='pequeno'>
                                        <a
                                            href='/adicionar'
                                            class='link-animated'
                                        ><i class='fas fa-plus-circle'></i>
                                            Não encontrou sua disciplina?</a>
                                    </div>
                                </div>

                                <div class='form-row'>
                                    <div class='form-group'>
                                        <label for='monitorREQ'><i
                                                class='fas fa-user-graduate'
                                            ></i>
                                            Monitor</label>
                                        <input
                                            type='text'
                                            name='monitorREQ'
                                            id='monitorREQ'
                                            class='input input-animated'
                                            placeholder='Nome do monitor'
                                            required
                                        />
                                    </div>
                                    <div class='form-group'>
                                        <label for='professorREQ'><i
                                                class='fas fa-chalkboard-teacher'
                                            ></i>
                                            Professor</label>
                                        <input
                                            type='text'
                                            name='professorREQ'
                                            id='professorREQ'
                                            class='input input-animated'
                                            placeholder='Nome do professor'
                                            required
                                        />
                                    </div>
                                </div>

                                <div class='form-group'>
                                    <label for='localREQ'><i
                                            class='fas fa-map-marker-alt'
                                        ></i>
                                        Local ou Link</label>
                                    <input
                                        type='text'
                                        name='localREQ'
                                        id='localREQ'
                                        class='input input-animated'
                                        placeholder='Sala/Laboratório ou Link da videoconferência'
                                        required
                                    />
                                </div>

                                <div class='form-row'>
                                    <div class='form-group'>
                                        <label for='diaREQ'><i
                                                class='fas fa-calendar-day'
                                            ></i>
                                            Dia</label>
                                        <select
                                            name='diaREQ'
                                            id='diaREQ'
                                            class='input input-animated'
                                            required
                                        >
                                            <option
                                                value=''
                                                disabled
                                                selected
                                            >Selecione o dia</option>
                                            <option
                                                value='Segunda'
                                            >Segunda-Feira</option>
                                            <option
                                                value='Terça'
                                            >Terça-Feira</option>
                                            <option
                                                value='Quarta'
                                            >Quarta-Feira</option>
                                            <option
                                                value='Quinta'
                                            >Quinta-Feira</option>
                                            <option
                                                value='Sexta'
                                            >Sexta-Feira</option>
                                        </select>
                                    </div>
                                    <div class='form-group'>
                                        <label for='horarioREQ'><i
                                                class='fas fa-clock'
                                            ></i>
                                            Horário</label>
                                        <input
                                            type='time'
                                            name='horarioREQ'
                                            id='horarioREQ'
                                            class='input input-animated'
                                            required
                                        />
                                    </div>
                                </div>

                                <button
                                    type='submit'
                                    class='btn-primary btn-submit'
                                >
                                    <span class='btn-text'>Adicionar Monitoria</span>
                                    <i class='fas fa-arrow-right'></i>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Monitoria Cards -->
                <div class='dashboard-cards' id='monitorias-container'>
                    <div class='filter-bar'>
                        <div class='filter-chips'>
                            <span
                                class='chip active'
                                data-filter='all'
                            >Todos</span>
                            <span
                                class='chip'
                                data-filter='Segunda'
                            >Segunda</span>
                            <span class='chip' data-filter='Terça'>Terça</span>
                            <span
                                class='chip'
                                data-filter='Quarta'
                            >Quarta</span>
                            <span
                                class='chip'
                                data-filter='Quinta'
                            >Quinta</span>
                            <span class='chip' data-filter='Sexta'>Sexta</span>
                        </div>
                        <div class='view-toggle'>
                            <button class='view-btn active' data-view='grid'><i
                                    class='fas fa-th-large'
                                ></i></button>
                            <button class='view-btn' data-view='list'><i
                                    class='fas fa-list'
                                ></i></button>
                        </div>
                    </div>

                    <div class='monitoria-grid' id='monitorias-grid'>
                        {{#each Monitorias}}
                            <div class='monitoria-card' data-day='{{dia}}'>
                                <div
                                    class='monitoria-header'
                                    style='background-color: {{randomColor}}'
                                >
                                    <div class='monitoria-badge'>{{dia}}</div>
                                    <div class='monitoria-actions'>
                                        <button
                                            class='btn-icon monitoria-edit'
                                            data-id='{{id}}'
                                        >
                                            <i class='fas fa-edit'></i>
                                        </button>
                                        <button
                                            class='btn-icon monitoria-delete'
                                            data-id='{{id}}'
                                        >
                                            <i class='fas fa-trash-alt'></i>
                                        </button>
                                    </div>
                                </div>
                                <div class='monitoria-body'>
                                    <div class='monitoria-icon'>
                                        <i class='{{getDisciplineIcon}}'></i>
                                    </div>
                                    <h3 class='monitoria-title'>
                                        {{#if
                                            Materia
                                        }}{{Materia.nome}}{{else}}Matéria não
                                            encontrada{{/if}}
                                    </h3>
                                    <div class='monitoria-info'>
                                        <p><i class='fas fa-user-tie'></i>
                                            <strong>Professor:</strong>
                                            {{#if
                                                Professor
                                            }}{{Professor.nome}}{{else}}Professor
                                                não encontrado{{/if}}</p>
                                        <p><i class='fas fa-user-graduate'></i>
                                            <strong>Monitor:</strong>
                                            {{#if
                                                Monitor
                                            }}{{Monitor.nome}}{{else}}Monitor
                                                não encontrado{{/if}}</p>
                                        <p><i class='fas fa-calendar-alt'></i>
                                            <strong>Dia/Horário:</strong>
                                            <span class='highlight'>{{dia}}
                                                às
                                                {{horario}}</span></p>
                                        <p><i class='fas fa-map-marker-alt'></i>
                                            <strong>Local:</strong>
                                            {{local}}</p>
                                    </div>
                                    <div class='monitoria-footer'>
                                        <div class='monitoria-stats'>
                                            <div class='stat'>
                                                <i class='fas fa-users'></i>
                                                <span>{{inscricoes}}</span>
                                            </div>
                                            <button
                                                class='btn-text-icon open-details'
                                                data-id='{{id}}'
                                            >
                                                Detalhes
                                                <i
                                                    class='fas fa-chevron-right'
                                                ></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {{else}}
                            <div class='empty-state'>
                                <div class='empty-icon'>
                                    <i class='fas fa-clipboard-list'></i>
                                </div>
                                <h3>Nenhuma monitoria cadastrada</h3>
                                <p>Clique em "Nova Monitoria" para adicionar sua
                                    primeira monitoria.</p>
                            </div>
                        {{/each}}
                    </div>
                </div>

                <!-- Confirmation Modal for Deletion -->
                <div id='deleteModal' class='modal'>
                    <div class='modal-content modal-sm'>
                        <div class='modal-header'>
                            <h3>Confirmar Exclusão</h3>
                            <button
                                class='close-button'
                                id='closeDeleteModal'
                            ><i class='fas fa-times'></i></button>
                        </div>
                        <div class='modal-body'>
                            <p>Tem certeza que deseja excluir esta monitoria?
                                Esta ação não pode ser desfeita.</p>
                        </div>
                        <div class='modal-footer'>
                            <button
                                class='btn-secondary'
                                id='cancelDelete'
                            >Cancelar</button>
                            <a
                                href='#'
                                id='confirmDelete'
                                class='btn-danger'
                            >Excluir</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Modal handling function function toggleForm() { const modal =
            document.getElementById('formModal');
            modal.classList.toggle('show');
            document.body.classList.toggle('modal-open'); }
            document.getElementById('toggleFormButton').addEventListener('click',
            toggleForm); // Close modal when clicking outside of it
            window.addEventListener('click', function(event) { const modal =
            document.getElementById('formModal'); if (event.target === modal) {
            toggleForm(); } }); // Input animations const inputs =
            document.querySelectorAll('.input-animated'); inputs.forEach(input
            => { input.addEventListener('focus', () => {
            input.parentElement.classList.add('focused'); });
            input.addEventListener('blur', () => { if (input.value === '') {
            input.parentElement.classList.remove('focused'); } }); // Check if
            the input already has a value on page load if (input.value !== '') {
            input.parentElement.classList.add('focused'); } }); // Deletion
            confirmation const deleteButtons =
            document.querySelectorAll('.monitoria-delete'); const deleteModal =
            document.getElementById('deleteModal'); const closeDeleteModal =
            document.getElementById('closeDeleteModal'); const cancelDelete =
            document.getElementById('cancelDelete'); const confirmDelete =
            document.getElementById('confirmDelete');
            deleteButtons.forEach(button => { button.addEventListener('click',
            (e) => { e.preventDefault(); const id =
            button.getAttribute('data-id'); confirmDelete.href =
            `/deletar/${id}`; deleteModal.classList.add('show');
            document.body.classList.add('modal-open'); }); });
            closeDeleteModal.addEventListener('click', () => {
            deleteModal.classList.remove('show');
            document.body.classList.remove('modal-open'); });
            cancelDelete.addEventListener('click', () => {
            deleteModal.classList.remove('show');
            document.body.classList.remove('modal-open'); }); // Filtering const
            filterChips = document.querySelectorAll('.chip'); const
            monitoriaCards = document.querySelectorAll('.monitoria-card');
            filterChips.forEach(chip => { chip.addEventListener('click', () => {
            // Remove active class from all chips filterChips.forEach(c =>
            c.classList.remove('active')); // Add active class to clicked chip
            chip.classList.add('active'); const filter =
            chip.getAttribute('data-filter'); monitoriaCards.forEach(card => {
            if (filter === 'all' || card.getAttribute('data-day') === filter) {
            card.style.display = 'block'; } else { card.style.display = 'none';
            } }); }); }); // Search functionality const searchInput =
            document.getElementById('search-monitorias');
            searchInput.addEventListener('input', () => { const searchTerm =
            searchInput.value.toLowerCase(); monitoriaCards.forEach(card => {
            const title =
            card.querySelector('.monitoria-title').textContent.toLowerCase();
            const professor = card.querySelector('.monitoria-info
            p:nth-child(1)').textContent.toLowerCase(); const monitor =
            card.querySelector('.monitoria-info
            p:nth-child(2)').textContent.toLowerCase(); if
            (title.includes(searchTerm) || professor.includes(searchTerm) ||
            monitor.includes(searchTerm)) { card.style.display = 'block'; } else
            { card.style.display = 'none'; } }); }); // View toggle const
            viewButtons = document.querySelectorAll('.view-btn'); const
            monitoriasGrid = document.getElementById('monitorias-grid');
            viewButtons.forEach(button => { button.addEventListener('click', ()
            => { // Remove active class from all view buttons
            viewButtons.forEach(btn => btn.classList.remove('active')); // Add
            active class to clicked button button.classList.add('active'); const
            view = button.getAttribute('data-view'); if (view === 'grid') {
            monitoriasGrid.classList.add('grid-view');
            monitoriasGrid.classList.remove('list-view'); } else {
            monitoriasGrid.classList.add('list-view');
            monitoriasGrid.classList.remove('grid-view'); } }); });
        </script>
    </body>
</html>